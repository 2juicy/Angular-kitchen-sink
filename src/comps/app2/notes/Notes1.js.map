{"version":3,"file":"Notes1.js","sourceRoot":"","sources":["Notes1.ts"],"names":[],"mappings":"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","sourcesContent":["import {Component} from \"@angular/core\";\r\nimport {Sliderpanel} from \"../../sliderpanel/Sliderpanel\";\r\nimport {CommBroker} from \"../../../services/CommBroker\";\r\nimport {Consts} from \"../../../../src/Conts\";\r\nimport {NotesBase} from \"./NotesBase\";\r\nimport {MailModel} from \"../../../models/MailModel\";\r\nimport {\r\n    FormGroup,\r\n    FormControl,\r\n    FormBuilder,\r\n    Validators\r\n} from \"@angular/forms\";\r\nimport StartCapValidator from \"../../../validators/StartCapValidator\";\r\nimport NameTakenValidator from \"../../../validators/NameTakenValidator\";\r\nimport * as bootbox from \"bootbox\";\r\nimport Notes1Template from \"./Notes1.html!text\";\r\nimport Notes1Styles from \"./Notes1.css!text\";\r\n\r\n\r\n@Component({\r\n    selector: 'Notes1',\r\n    moduleId: __moduleName,\r\n    template: Notes1Template,\r\n    styles: [Notes1Styles]\r\n})\r\n\r\n/**\r\n The first Note1 slider component in a series of sliders / notes.\r\n Demonstrates the usage of explicit form configuration.\r\n **/ export class Notes1 extends NotesBase {\r\n\r\n    private notesForm: FormGroup;\r\n    private notesTextArea: FormControl;\r\n    private userName: FormControl;\r\n    private reference: FormControl;\r\n    private phone: FormControl;\r\n    private birthdate: FormControl;\r\n    private counter: FormControl;\r\n    private login: FormControl;\r\n    private model: MailModel;\r\n    private mapModel: Map<any, any>; // demonstrates map although we are not using it for anything\r\n\r\n\r\n    constructor(fb: FormBuilder, protected sliderPanel: Sliderpanel, protected commBroker: CommBroker) {\r\n        super(sliderPanel, commBroker);\r\n        this.slideLeft = 'notes2';\r\n\r\n        this.notesForm = fb.group({\r\n            'userName': ['', Validators.required],\r\n            'reference': ['', Validators.required],\r\n            'phone': ['(xxx)-xxxx-xxx', Validators.minLength(10)],\r\n            'birthdate': ['', [Validators.required, this.isOldEnough]],\r\n            'counter': [''],\r\n            'notesTextArea': ['enter text here', [Validators.required, StartCapValidator]],\r\n            'login': ['', [Validators.required, StartCapValidator], NameTakenValidator]\r\n        });\r\n\r\n        // map to instances from form\r\n        this.notesTextArea = this.notesForm.controls['notesTextArea'] as FormControl;\r\n        this.userName = this.notesForm.controls['userName'] as FormControl;\r\n        this.reference = this.notesForm.controls['reference']  as FormControl;\r\n        this.login = this.notesForm.controls['login']  as FormControl;\r\n        this.phone = this.notesForm.controls['phone']  as FormControl;\r\n        this.birthdate = this.notesForm.controls['birthdate']  as FormControl;\r\n        this.counter = this.notesForm.controls['counter']  as FormControl;\r\n        this.model = new MailModel(0, '', true, '', '');\r\n\r\n        // unrelated, demonstrate usage of Map\r\n        this.mapModel = new Map();\r\n        this.mapModel.set('my name', 'Sean Levy');\r\n        //console.log(this.mapModel.get('my name'));\r\n\r\n        this.observeNameChange();\r\n        this.observeFormChange();\r\n\r\n        this.commBroker.getService(Consts.Services().Properties).setPropView('notes1')\r\n    }\r\n\r\n    isOldEnough(control: FormControl): any {\r\n        if (!control.value) {\r\n            return null;\r\n        }\r\n        let birthDatePlus18 = new Date(control.value);\r\n        let year = birthDatePlus18.getFullYear();\r\n        if (year < 1925)\r\n            return {notValid: true};\r\n\r\n        birthDatePlus18.setFullYear(birthDatePlus18.getFullYear() + 18);\r\n        return birthDatePlus18 < new Date() ? null : {tooYoung: true};\r\n    }\r\n\r\n    /**\r\n     * Listen to observable emitted events from name control\r\n     * use one of the many RX operators debounceTime to control\r\n     * the number of events emitted per milliseconds\r\n     **/\r\n    observeNameChange() {\r\n        this.userName.valueChanges.debounceTime(100).subscribe((value: string) => {\r\n            console.log('name changed, notified via observable: ', value);\r\n        });\r\n    }\r\n\r\n    observeFormChange() {\r\n        this.notesForm.valueChanges.debounceTime(100).subscribe((value: string) => {\r\n            console.log('forum changed, notified via observable: ', value);\r\n        });\r\n    }\r\n\r\n    onReset(event: MouseEvent) {\r\n        event.stopImmediatePropagation();\r\n        event.preventDefault();\r\n        try {\r\n            this.notesForm.reset();\r\n        } catch (e) {\r\n        }\r\n        return false;\r\n\r\n    }\r\n\r\n    onSubmit(event) {\r\n        bootbox.alert(`sent ${event.notesTextArea}`);\r\n    }\r\n\r\n    onChange(event) {\r\n        if (event.target.value.length < 3)\r\n            console.log('text too short for subject');\r\n    }\r\n}\r\n\r\n"]}