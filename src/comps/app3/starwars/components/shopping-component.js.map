{"version":3,"file":"shopping-component.js","sourceRoot":"","sources":["shopping-component.ts"],"names":[],"mappings":";;;;;;;;;;;;;QAUM,mBAAmB;;;;;;;;;;;;;;;;;;;YAAnB,mBAAmB,GAAG,yBAAc,CAAC,UAAC,KAAS,IAAG,OAAA,KAAK,CAAC,IAAI,EAAV,CAAU,EAAE,UAAA,KAAK,IAAE,OAAA,KAAK,CAAC,KAAK,EAAX,CAAW,EAAE,UAAC,IAAI,EAAE,KAAK;gBAChG,IAAM,SAAS,GAAG,KAAK,CAAC,MAAM,CAAC,UAAC,GAAG,EAAE,IAAQ,IAAK,OAAA,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,IAAI,GAAG,EAA5B,CAA4B,EAAE,EAAE,CAAC,CAAC;gBACpF,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,UAAA,EAAE,IAAI,OAAA,SAAS,CAAC,EAAE,CAAC,EAAb,CAAa,CAAC,CAAC;YACzC,CAAC,CAAC,CAAC;YA2BH;gBAOI,2BAAoB,QAAiB,EAAE,WAAuB,EAAE,WAAuB;oBAP3F,iBAuBC;oBAhBuB,aAAQ,GAAR,QAAQ,CAAS;oBAN7B,UAAK,GAAG,EAAE,CAAC;oBACX,gBAAW,GAAG,EAAE,CAAC;oBAMrB,IAAI,CAAC,OAAO,GAAG,WAAW,CAAC,gBAAgB,CAAC,WAAW,CAAC,OAAO,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;oBAChF,IAAI,CAAC,aAAa,GAAG,WAAW,CAAC,gBAAgB,CAAC,WAAW,CAAC,SAAS,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;oBACxF,IAAI,CAAC,kBAAkB,GAAG,WAAW,CAAC,gBAAgB,CAAC,WAAW,CAAC,cAAc,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;oBAElG,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,UAAC,KAAe;wBACpC,KAAI,CAAC,KAAK,GAAG,KAAK,CAAC,KAAK,CAAC;wBACzB,KAAI,CAAC,WAAW,GAAG,mBAAmB,CAAC,KAAK,CAAC,CAAC;oBAClD,CAAC,CAAC,CAAC;oBACH,iBAAiB,CAAC,uBAAuB,CAAC,IAAI,CAAC,QAAQ,EAAE,WAAW,CAAC,CAAC;gBAC1E,CAAC;gBAEc,yCAAuB,GAAtC,UAAuC,QAAQ,EAAE,WAAW;oBACxD,QAAQ,CAAC,QAAQ,CAAC,WAAW,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC,CAAC;oBACrD,QAAQ,CAAC,QAAQ,CAAC,WAAW,CAAC,OAAO,CAAC,gBAAgB,CAAC,CAAC,CAAC;gBAC7D,CAAC;gBAlCL;oBAAC,gBAAS,CAAC;wBACP,QAAQ,EAAE,UAAU;wBACpB,QAAQ,EAAE,6UAOT;qBACJ,CAAC;;qCAAA;gBAyBF,wBAAC;YAAD,CAAC,AAvBD,IAuBC;YAvBD,iDAuBC,CAAA","sourcesContent":["import {Component, Inject} from '@angular/core'\r\nimport {CartActions} from \"../actions/cart-actions\";\r\nimport {PartActions} from \"../actions/part-actions\";\r\nimport {PartsView} from \"../components/parts-view\";\r\nimport {CartView} from \"../components/cart-view\";\r\nimport {AddPartsView} from \"./add-part-view\";\r\nimport {createSelector} from 'reselect';\r\nimport {AppStore} from \"angular2-redux-util\";\r\n\r\n// select the parts in cart\r\nconst partsInCartSelector = createSelector((state:any)=>state.cart, state=>state.parts, (cart, parts) => {\r\n    const partsById = parts.reduce((map, part:any) => (map[part.id] = part) && map, {});\r\n    return cart.map(id => partsById[id]);\r\n});\r\n\r\nexport interface ICart {\r\n    cart:string[]\r\n}\r\nexport interface IPart {\r\n    id:string,\r\n    name:string\r\n}\r\nexport interface IAppStore {\r\n    cart:ICart,\r\n    parts: IPart[]\r\n\r\n}\r\n\r\n@Component({\r\n    selector: 'shopping',\r\n    template: `\r\n        <h3>Parts</h3>\r\n        <add-part (add)=\"addPart($event)\"></add-part>\r\n        <parts [parts]=\"parts\" [partsInCart]=\"partsInCart\" (addToCart)=\"addPartToCart($event)\"></parts>\r\n        <hr/>\r\n        <h3>Cart</h3>\r\n        <cart [parts]=\"partsInCart\" (removeFromCart)=\"removePartFromCart($event)\"></cart>\r\n    `\r\n})\r\n\r\nexport class ShoppingComponent {\r\n    private parts = [];\r\n    private partsInCart = [];\r\n    private addPart;\r\n    private addPartToCart;\r\n    private removePartFromCart;\r\n\r\n    constructor(private appStore:AppStore, partActions:PartActions, cartActions:CartActions) {\r\n        this.addPart = partActions.createDispatcher(partActions.addPart, this.appStore);\r\n        this.addPartToCart = cartActions.createDispatcher(cartActions.addToCart, this.appStore);\r\n        this.removePartFromCart = cartActions.createDispatcher(cartActions.removeFromCart, this.appStore);\r\n\r\n        this.appStore.subscribe((state:IAppStore) => {\r\n            this.parts = state.parts;\r\n            this.partsInCart = partsInCartSelector(state);\r\n        });\r\n        ShoppingComponent.createInitialSetOfParts(this.appStore, partActions);\r\n    }\r\n\r\n    private static createInitialSetOfParts(appStore, partActions) {\r\n        appStore.dispatch(partActions.addPart(\"Lightsaber\"));\r\n        appStore.dispatch(partActions.addPart(\"X-wing diecast\"));\r\n    }\r\n}"]}